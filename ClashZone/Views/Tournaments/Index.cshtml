@model IEnumerable<DataAccess.Models.Tournament>
@{
    bool isMy = ViewBag.IsMy != null && (bool)ViewBag.IsMy;
    string selectedFormat = ViewBag.SelectedFormat as string;
    ViewData["Title"] = isMy ? "Moje turnieje" : "Nadchodzące turnieje";
}

<div class="container mt-4">
    <!-- Navigation tabs between browsing and user's tournaments -->
    <ul class="nav nav-tabs mb-3">
        <li class="nav-item">
            <a class="nav-link @(isMy ? "" : "active")" asp-action="Index">Przeglądaj</a>
        </li>
        <li class="nav-item">
            <a class="nav-link @(isMy ? "active" : "")" asp-action="MyTournaments">Moje turnieje</a>
        </li>
    </ul>
    <!-- Filter buttons for team size -->
    <div class="btn-group mb-3" role="group">
        <a class="btn btn-outline-primary @(selectedFormat == "1v1" ? "active" : "")" asp-action="Index" asp-route-format="1v1">1v1</a>
        <a class="btn btn-outline-primary @(selectedFormat == "2v2" ? "active" : "")" asp-action="Index" asp-route-format="2v2">2v2</a>
        <a class="btn btn-outline-primary @(selectedFormat == "5v5" ? "active" : "")" asp-action="Index" asp-route-format="5v5">5v5</a>
        <a class="btn btn-outline-secondary @(string.IsNullOrEmpty(selectedFormat) ? "active" : "")" asp-action="Index">Wszystkie</a>
    </div>

    @if (!Model.Any())
    {
        <p class="text-muted">Brak turniejów.</p>
    }
    else
    {
        <div class="list-group">
            @foreach (var t in Model)
            {
                <div class="list-group-item list-group-item-dark d-flex justify-content-between align-items-center">
                    <div>
                        <h5 class="mb-1">@t.Name</h5>
                        <small>@t.StartDate.ToString("dd.MM.yyyy HH:mm") • Format: @t.Format</small>
                        <div class="text-muted">@t.GameTitle</div>
                    </div>
                    <div class="d-flex align-items-center gap-2">
                        <span class="badge bg-warning text-dark">@t.MaxParticipants uczestników</span>
                        <a class="btn btn-sm" style="background-color:#FF2B3E; color:#fff;" asp-action="Details" asp-route-id="@t.Id">Sprawdź turniej</a>
                    </div>
                </div>
            }
        </div>
    }
</div>