@model List<ClashZone.Web.ViewModels.Admin.UserListItemVm>
@{
    ViewData["Title"] = "Użytkownicy";
}
<div class="container my-4 text-white">
<table class="table table-dark table-hover align-middle">
        <h2>Użytkownicy</h2>
    <thead>
        <tr>
            <th>Email</th>
            <th>Login</th>
            <th>Role</th>
            <th>Status</th>
            <th class="text-end">Akcje</th>
        </tr>
    </thead>
    <tbody>
@foreach (var u in Model)
{
    var hasAdmin = u.Roles.Contains("Admin");
    var hasOrganizer = u.Roles.Contains("Organizer");
    <tr>
        <td>@u.Email</td>
        <td>@u.UserName</td>
        <td>
            @string.Join(", ", u.Roles)
        </td>
        <td>
            @if (u.IsBanned) {
                <span class="badge bg-danger">Zbanowany</span>
            } else {
                <span class="badge bg-success">Aktywny</span>
            }
        </td>
        <td class="text-end">
            <div class="btn-group">
                <form asp-action="MakeOrganizer" asp-controller="Users" method="post" class="d-inline">
                    <input type="hidden" name="id" value="@u.Id" />
                    <button type="submit" class="btn btn-sm btn-outline-info" title="Nadaj rolę Organizator">Organizator</button>
                </form>
                <form asp-action="RemoveOrganizer" asp-controller="Users" method="post" class="d-inline">
                    <input type="hidden" name="id" value="@u.Id" />
                    <button type="submit" class="btn btn-sm btn-outline-secondary" title="Usuń rolę Organizator">-Organizator</button>
                </form>
                <form asp-action="MakeAdmin" asp-controller="Users" method="post" class="d-inline">
                    <input type="hidden" name="id" value="@u.Id" />
                    <button type="submit" class="btn btn-sm btn-outline-warning" title="Nadaj rolę Admin">Admin</button>
                </form>
                <form asp-action="RemoveAdmin" asp-controller="Users" method="post" class="d-inline">
                    <input type="hidden" name="id" value="@u.Id" />
                    <button type="submit" class="btn btn-sm btn-outline-secondary" title="Usuń rolę Admin">-Admin</button>
                </form>
                @if (!u.IsBanned)
                {
                    <form asp-action="Ban" asp-controller="Users" method="post" class="d-inline">
                        <input type="hidden" name="id" value="@u.Id" />
                        <button type="submit" class="btn btn-sm btn-outline-danger" title="Zbanuj">Zbanuj</button>
                    </form>
                }
                else
                {
                    <form asp-action="Unban" asp-controller="Users" method="post" class="d-inline">
                        <input type="hidden" name="id" value="@u.Id" />
                        <button type="submit" class="btn btn-sm btn-outline-success" title="Odbanuj">Odbanuj</button>
                    </form>
                }
            </div>
        </td>
    </tr>
}
    </tbody>
</table>
</div>
